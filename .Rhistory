amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
)
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
)
homicide_trial %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
)
homicide_trial %>%
group_by(city, percent_of_cases_per_disposition) %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, desc(percent_of_cases_per_disposition))
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, percent_of_cases_per_disposition)
knitr::opts_chunk$set(echo = TRUE)
# Turn off scientific notation
options(scipen=999)
library(tidyverse)
library(janitor)
library(lubridate)
library(readr)
homicide_data <- read_csv("homicide-data.csv")
homicide_data$reported_date <- ymd(homicide_data$reported_date)
homicide_data_baltimore <- homicide_data %>%
filter(city == "Baltimore")
homicide_data_baltimore %>%
filter(reported_date >= as.Date("2015-01-01") & reported_date <= as.Date("2017-12-31")) %>%
summarize(
threeyr_homicide_amount = n(),
homicides_per_day = threeyr_homicide_amount / (365*3)
)
homicide_2014data <- homicide_data_baltimore %>%
filter(reported_date >= as.Date("2014-01-01") & reported_date <= as.Date("2014-12-31"))
homicide_2014data_disposition <- homicide_2014data %>%
group_by(disposition) %>%
summarize(
disposition_breakdown = n(),
)
homicide_2014data_disposition %>%
group_by(disposition) %>%
summarize(
percent_cases = disposition_breakdown / sum(homicide_2014data_disposition$disposition_breakdown) * 100
)
homicide_2017data <- homicide_data_baltimore %>%
filter(reported_date >= as.Date("2017-01-01") & reported_date <= as.Date("2017-12-31"))
homicide_2017data_disposition <- homicide_2017data %>%
group_by(disposition) %>%
summarize(
disposition_breakdown = n()
)
homicide_2017data_disposition %>%
group_by(disposition) %>%
summarize(
percent_cases = disposition_breakdown / sum(homicide_2017data_disposition$disposition_breakdown) * 100
)
homicide_3yrdata <- homicide_data_baltimore %>%
filter(reported_date >= as.Date("2015-01-01") & reported_date <= as.Date("2017-12-31"))
homicide_3yrdata %>%
summarize(
cases_amount = n()
)
homicide_3yrdata_disposition <- homicide_3yrdata %>%
group_by(disposition) %>%
summarize(
disposition_breakdown = n()
)
homicide_3yrdata_disposition
homicide_3yrdata_disposition %>%
group_by(disposition) %>%
summarize(
percent_cases = disposition_breakdown / sum(homicide_3yrdata_disposition$disposition_breakdown) * 100
)
homicide_data <- homicide_data %>%
mutate(year = year(reported_date))
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
percent_of_cases_per_disposition
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
arrange(city, year, percent_of_cases_per_disposition)
homicide_trial %>%
group_by(city, year, percent_of_cases_per_disposition) %>%
arrange(city, year, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
filter(disposition == "Closed without arrest")
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
filter(disposition == "Closed without arrest") %>%
arrange(city, year)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
filter(disposition == "Closed without arrest") %>%
arrange(city, percent_of_cases_per_disposition)
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
filter(disposition == "Closed without arrest") %>%
arrange(city, desc(percent_of_cases_per_disposition))
homicide_trial <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
filter(disposition == "Closed without arrest")
homicide_trial %>%
group_by(city, year, percent_of_cases_per_disposition) %>%
summarize(
change_in_percentage = percent_of_cases_per_disposition
)
homicide_trial_trial <- homicide_trial %>%
select(city, year, percent_of_cases_per_disposition) %>%
summarize(
change_in_percentage = percent_of_cases_per_disposition
)
View(homicide_trial_trial)
homicide_trial_trial <- homicide_trial %>%
select(city, year, percent_of_cases_per_disposition) %>%
group_by(city, year, percent_of_cases_per_disposition) %>%
arrange(year, .by_group = TRUE) %>%
mutate(value_diff = value - lag(value))
homicide_trial_trial <- homicide_trial %>%
select(city, year, percent_of_cases_per_disposition) %>%
group_by(city, year, percent_of_cases_per_disposition) %>%
arrange(year, .by_group = TRUE) %>%
mutate(value_diff = value - lag(percent_of_cases_per_disposition))
homicide_trial_trial <- homicide_trial %>%
select(city, year, percent_of_cases_per_disposition) %>%
group_by(city, year, percent_of_cases_per_disposition) %>%
arrange(year, .by_group = TRUE) %>%
mutate(value_diff = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition))
homicide_trial_trial <- homicide_trial %>%
select(city, year, percent_of_cases_per_disposition)
homicide_trial_trial <- homicide_trial %>%
select(city, year, percent_of_cases_per_disposition) %>%
distinct()
View(homicide_trial)
View(homicide_data)
library(readr)
homicide_data <- read_csv("homicide-data.csv")
homicide_data$reported_date <- ymd(homicide_data$reported_date)
homicide_data$reported_date <- ymd(homicide_data$reported_date)
homicide_data <- homicide_data %>%
mutate(year = year(reported_date))
homicide_arrests_per_city_per_year <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
filter(disposition == "Closed by arrest")
View(homicide_arrests_per_city_per_year)
delta_homicide_arrests_per_city_per_year <- homicide_arrests_per_city_per_year %>%
select(city, year, percent_of_cases_per_disposition)
View(delta_homicide_arrests_per_city_per_year)
delta_homicide_arrests_per_city_per_year <- homicide_arrests_per_city_per_year %>%
select(city, year, percent_of_cases_per_disposition) %>%
distinct()
View(delta_homicide_arrests_per_city_per_year)
delta_homicide_arrests_per_city_per_year <- delta_homicide_arrests_per_city_per_year %>%
arrange(year, .by_group = TRUE) %>%
mutate(delta = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition))
delta_homicide_arrests_per_city_per_year <- delta_homicide_arrests_per_city_per_year %>%
arrange(city, .by_group = TRUE) %>%
mutate(delta = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition))
delta_homicide_arrests_per_city_per_year <- delta_homicide_arrests_per_city_per_year %>%
arrange(city, .by_group = TRUE) %>%
mutate(delta = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition, k = 1))
delta_homicide_arrests_per_city_per_year <- delta_homicide_arrests_per_city_per_year %>%
group_by(city)
arrange(city, .by_group = TRUE) %>%
mutate(delta = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition))
delta_homicide_arrests_per_city_per_year <- delta_homicide_arrests_per_city_per_year %>%
group_by(city) %>%
arrange(city, .by_group = TRUE) %>%
mutate(delta = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition))
delta_homicide_arrests_per_city_per_year <- delta_homicide_arrests_per_city_per_year %>%
group_by(city) %>%
arrange(city, .by_group = TRUE) %>%
mutate(delta = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition))
view(delta_homicide_arrests_per_city_per_year)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta < 0 ~ 'negative cases',
delta > 0 ~ 'positive cases'
)
)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta < 0 ~ 'negative cases',
delta > 0 ~ 'positive cases'
)
) %>%
group_by(city, cities_with_negative_change) %>%
summarize(
count = n()
)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta < 0 ~ 'negative cases',
delta > 0 ~ 'positive cases'
)
) %>%
group_by(cities_with_negative_change) %>%
summarize(
count = n()
)
View(homicide_arrests_per_city_per_year)
View(homicide_data)
group_by(city)
homicide_data %>% group_by(city) %>% summarize(count = n())
homicide_data_2 <- homicide_data %>% group_by(city) %>% summarize(count = n())
View(homicide_data_2)
library(readr)
homicide_data <- read_csv("homicide-data.csv")
library(readr)
homicide_data <- read_csv("homicide-data.csv")
homicide_data$reported_date <- ymd(homicide_data$reported_date)
homicide_data$reported_date <- ymd(homicide_data$reported_date)
homicide_data <- homicide_data %>%
mutate(year = year(reported_date))
homicide_arrests_per_city_per_year <- homicide_data %>%
filter(year == "2014" | year == "2017") %>%
group_by(city, year, disposition) %>%
mutate(
amount_of_cases_per_disposition = n()
) %>%
group_by(city, year) %>%
mutate(
amount_of_cases = n(),
percent_of_cases_per_disposition = amount_of_cases_per_disposition / amount_of_cases * 100
) %>%
filter(disposition == "Closed by arrest")
View(homicide_arrests_per_city_per_year)
delta_homicide_arrests_per_city_per_year <- homicide_arrests_per_city_per_year %>%
select(city, year, percent_of_cases_per_disposition) %>%
distinct()
View(homicide_data)
View(delta_homicide_arrests_per_city_per_year)
delta_homicide_arrests_per_city_per_year <- delta_homicide_arrests_per_city_per_year %>%
group_by(city) %>%
arrange(city, .by_group = TRUE) %>%
mutate(delta = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition))
view(delta_homicide_arrests_per_city_per_year)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta < 0 ~ 'negative cases',
delta > 0 ~ 'positive cases'
)
) %>%
group_by(cities_with_negative_change) %>%
summarize(
count = n()
)
View(homicide_data)
delta_homicide_arrests_per_city_per_year <- delta_homicide_arrests_per_city_per_year %>%
group_by(city) %>%
arrange(city, year, .by_group = TRUE) %>%
mutate(delta = percent_of_cases_per_disposition - lag(percent_of_cases_per_disposition))
view(delta_homicide_arrests_per_city_per_year)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta < 0 ~ 'negative cases',
delta > 0 ~ 'positive cases'
)
) %>%
group_by(cities_with_negative_change) %>%
summarize(
count = n()
)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta <= 0 ~ 'negative cases',
delta >= 0 ~ 'positive cases'
)
) %>%
group_by(cities_with_negative_change) %>%
summarize(
count = n()
)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta < 0 ~ 'negative cases',
delta > 0 ~ 'positive cases'
)
) %>%
group_by(cities_with_negative_change) %>%
summarize(
count = n()
)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta < 0 ~ 'negative cases',
delta >= 0 ~ 'positive cases'
)
) %>%
group_by(cities_with_negative_change) %>%
summarize(
count = n()
)
delta_homicide_arrests_per_city_per_year %>%
mutate(
cities_with_negative_change = case_when(
delta < 0 ~ 'negative cases',
delta > 0 ~ 'positive cases'
)
) %>%
group_by(cities_with_negative_change) %>%
summarize(
count = n()
)
